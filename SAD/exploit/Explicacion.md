# PRÁCTICA: SEGURIDAD EN APLICACIONES WEB – ASIR 2º

## PARTE A — Inyección SQL (SQL Injection) en Python y Flask

1. SQL

Empezamos creando una base de datos con sqllite3, con los usuarios y contraseñas

![](image.png)


Posteriormente creamos el archivo app.py, para ello se utilizan get para obtener los datos y post para que se envíen,además se usa el query
para que se compruebe los usuarios y contraseñas que se introducen y verificar que son los mismos que están en la tabla.

![alt text](image-1.png)

Hemos comprobado que funciona, puesto que recibe las credenciales que escribe y lo compara

![alt text](image-2.png)

![alt text](image-3.png)

![alt text](image-4.png)

A3 corrección de sql

![alt text](image-6.png)
![alt text](image-5.png)

Estos son los cambios en app.py

![alt text](image-7.png)
# PARTE B — XSS Reflejado en PHP

## B1. Desarrollo de aplicación vulnerable

En esta parte, al ejecutar un alert no permite mostrar el contenido de la página.

![alt text](image-8.png)

![alt text](image-12.png)

Se usa GET para enviar el texto ingresado en el campo de nombre q a la URL. Con (<?php echo $_GET["q"]; ?>) toma el valor exacto de ese parámetro q de la URL y lo imprime directamente en la página, si ingresamos esto<script>alert('XSS')</script>) en el campo de búsqueda, salta el alert.

## B2. Corrección de la vulnerabilidad
![alt text](image-9.png)

![alt text](image-11.png)

Para solucionarlo, utilizamos el siguiente código:

![alt text](image-13.png)


El código PHP incrustado (<?php echo htmlspecialchars($_GET["q"], ENT_QUOTES, 'UTF-8'); ?>) recupera el valor de la URL y, antes de imprimirlo en la página, utiliza la función htmlspecialchars(). Esta función convierte caracteres especiales como < y > a sus entidades HTML (&lt; y &gt;), lo cual neutraliza

# PARTE C — Implementación de XSS persistente en Flask

Creo otra carpeta con archivos nuevos, para no tocar los otros y que no den problemas.

![alt text](image-14.png)

Aparte creo un index.html, comments.html y un app.py nuevo y los meto en la  carpeta templates 

Este es el contenido del comments.html:


![alt text](image-16.png)

Este es el contenido del app.py

![alt text](image-17.png)

Después de hacer los códigos, nos sale el xss

![alt text](image-15.png)

